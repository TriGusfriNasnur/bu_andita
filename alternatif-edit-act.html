<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Update Karyawan</title>
</head>
<body>

<script>
  const token = localStorage.getItem('token');

  if (!token) {
    window.location.href = 'login.html';
  }

  // data pengganti $_POST
  const id = localStorage.getItem('edit_id');
  const name = localStorage.getItem('edit_name');

  if (!id || !name) {
    alert('Data edit tidak lengkap');
    window.location.href = 'alternatif.html';
  }

  fetch('http://localhost:3000/api/alternatif/${id}', {
    method: 'PUT',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer ' + token
    },
    body: JSON.stringify({ name })
  })
  .then(res => {
    if (!res.ok) throw new Error('Gagal update data');
    // bersihin storage
    localStorage.removeItem('edit_id');
    localStorage.removeItem('edit_name');
    window.location.href = 'alternatif.html';
  })
  .catch(err => {
    alert(err.message);
    window.location.href = 'alternatif.html';
  });
</script>

</body>
</html>